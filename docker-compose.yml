version: '2.0'

services:

    # Crossbar is the middleware that is used to connect different apps with websockets.
    crossbar:
        build: ./crossbar/
        image: crossbario/crossbar

    # This is the PHP backend.
    # It sends and receive events via websockets and Crossbar.io,
    #  this is why it depends on it.
    broadcaster:
        build: ./backend/
        links:
            - crossbar

    # This is the node.js frontend application.
    # It only serves static files generated by building JS app.
    frontend:
        build: ./frontend/
