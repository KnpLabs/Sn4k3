<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Sn4k3</title>
    <link rel="stylesheet" href="frontend/public/styles.css" media="all">
    <script src="phaser.js"></script>
</head>
<body>
<div id="snake-area"></div>
<!--<script src="frontend/public/bundle.js"></script>-->
<script>
    var game = new Phaser.Game(800, 600, Phaser.CANVAS, 'snake-area', {
        preload: preload,
        create: create,
        update: update,
        render: render
    });

    var fixture = {
        players: [
            {
                name: 'Ivan',
                snake: {
                    direction: 'left',
                    head_angle: 30,
                    length: 3,
                    body_parts: [
                        {
                            center_point: {
                                x: 10,
                                y: 10
                            },
                            radius: 10
                        },
                        {
                            center_point: {
                                x: 25,
                                y: 25
                            },
                            radius: 10
                        },
                        {
                            center_point: {
                                x: 40,
                                y: 40
                            },
                            radius: 10
                        }
                    ]
                },
                score: 100
            }
        ]
    };

    function preload() {
        game.stage.backgroundColor = '#000';
    }

    var snakes;

    function create() {
        game.world.resize(10000, 10000);

        game.camera.y = game.world.centerY - (game.camera.height / 2);
        game.camera.x = game.world.centerX - (game.camera.width / 2);

        snakes = game.add.group();

        game.add.text(600, 800, "- phaser -", {font: "32px Arial", fill: "#330088", align: "center"});
    }

    function update() {
        snakes.destroy();
        snakes = game.add.group();

        for (player of fixture.players) {
            drawSnake(player.snake);
        }
    }

    function render() {
        game.debug.cameraInfo(game.camera, 32, 32);
    }

    function drawSnake(snake) {
        for (body_part of snake.body_parts) {
            var item = game.add.graphics(game.world.centerX, game.world.centerY);

            item.lineStyle(3, 0xffffff, 1);
            item.drawCircle(
                    body_part.center_point.x,
                    body_part.center_point.y,
                    body_part.radius
            );

            snakes.add(item);
        }
    }
</script>
</body>
</html>
